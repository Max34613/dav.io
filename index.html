<script>
  // Загружаем пользователей ИЗ ФАЙЛА
  let profiles = [];
  let index = 0;

  async function loadUsers() {
    try {
      const res = await fetch('users.json');
      const data = await res.json();
      profiles = data.users || [];

      if (profiles.length) {
        document.getElementById('register').classList.add('hidden');
        document.getElementById('feed').classList.remove('hidden');
        show();
      }
    } catch (e) {
      alert('users.json не загрузился. НУЖЕН СЕРВЕР, не file://');
      console.error(e);
    }
  }

  function show() {
    if (!profiles.length) return;
    const p = profiles[index % profiles.length];
    document.getElementById('fName').textContent = p.name + ', ' + p.age;
    document.getElementById('fAvatar').textContent = p.avatar;

    const tags = document.getElementById('fTags');
    tags.innerHTML = '';
    (p.tags || []).forEach(t => {
      const s = document.createElement('span');
      s.className = 'tag';
      s.textContent = t;
      tags.appendChild(s);
    });
  }

  function next() {
    index++;
    show();
  }

  loadUsers();
</script>
